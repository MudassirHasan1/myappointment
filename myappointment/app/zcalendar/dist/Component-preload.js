//@ui5-bundle zcalendar/Component-preload.js
sap.ui.predefine("zcalendar/Component", ["sap/ui/core/UIComponent","zcalendar/model/models"],(e,t)=>{"use strict";return e.extend("zcalendar.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("zcalendar/controller/App.controller", ["sap/m/Label","sap/m/Popover","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/core/Fragment","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/core/date/UI5Date"],function(e,t,n,i,a,o,s,r,l){"use strict";var p=n.ValueState;return o.extend("zcalendar.controller.App",{onInit:async function(){var e=new s;var t=this.getOwnerComponent().getModel();var n=t.bindList("/Appointments",undefined,[],[],{$$ownRequest:true});var i=[];var a=[];await n.requestContexts(0,100).then(function(e){e.forEach(e=>{i.push(e.getObject())})});var o=t.bindList("/Employees",undefined,[],[],{$$ownRequest:true});await o.requestContexts(0,100).then(function(e){e.forEach(e=>{a.push(e.getObject())})});console.log(i);console.log(a);const r={startDate:l.getInstance("2025","0","23","11","0"),people:a.map(e=>{const t=i.filter(t=>t.employee_ID===e.ID).map(e=>({title:e.title,info:e.info,start:new Date(e.start),end:new Date(e.end)}));return{name:e.name,ID:e.ID,appointments:t}})};console.log(r);e.setData(r);this.getView().setModel(e)},_aDialogTypes:[{title:"Create Appointment",type:"create_appointment"},{title:"Create Appointment",type:"create_appointment_with_context"},{title:"Edit Appointment",type:"edit_appointment"}],handleAppointmentSelect:function(e){var t=e.getParameter("appointment");if(t){this._handleSingleAppointment(t)}else{this._handleGroupAppointments(e)}},_addNewAppointment:function(e){var t=this.getOwnerComponent().getModel();var n=[];n.push(e);var i=t.bindList("/Appointments",undefined,[],[],{$$ownRequest:true});var a=new s([]);n.forEach(function(e,t){i.create(e)});t.submitBatch("headerGroup").then(function(){sap.m.MessageBox.success("Successfully created.")}).then(function(){sap.ui.getCore().getMessageManager().getMessageModel()})},handleCancelButton:function(){this.byId("detailsPopover").close()},handleAppointmentCreate:function(){this._arrangeDialogFragment(this._aDialogTypes[0].type)},handleAppointmentAddWithContext:function(e){this.oClickEventParameters=e.getParameters();this._arrangeDialogFragment(this._aDialogTypes[1].type)},_validateDateTimePicker:function(e,t){var n=e.getDateValue(),i=t.getDateValue(),a="Start date should be before End date";if(n&&i&&i.getTime()<=n.getTime()){e.setValueState(p.Error);t.setValueState(p.Error);e.setValueStateText(a);t.setValueStateText(a)}else{e.setValueState(p.None);t.setValueState(p.None)}},updateButtonEnabledState:function(e){var t=this.byId("startDate"),n=this.byId("endDate"),i=t.getValueState()!==p.Error&&t.getValue()!==""&&n.getValue()!==""&&n.getValueState()!==p.Error;e.getBeginButton().setEnabled(i)},handleCreateChange:function(e){var t=this.byId("startDate"),n=this.byId("endDate");if(e.getParameter("valid")){this._validateDateTimePicker(t,n)}else{e.getSource().setValueState(p.Error)}this.updateButtonEnabledState(this.byId("createDialog"))},_removeAppointment:function(e,t){var n=this.getView().getModel(),i,a,o;if(!t){i=this.sPath.slice(0,this.sPath.indexOf("appointments/")+"appointments/".length)}else{i="/people/"+t+"/appointments"}a=n.getProperty(i);o=a.indexOf(e);if(o!==-1){a.splice(o,1)}n.setProperty(i,a)},handleDeleteAppointment:function(){var e=this.byId("detailsPopover"),t=e.getBindingContext(),n=t.getObject(),i=t.getPath().indexOf("/people/")+"/people/".length,a=t.getPath()[i];e.close();this._removeAppointment(n,a)},handleEditButton:function(){var e=this.byId("detailsPopover");this.sPath=e.getBindingContext().getPath();e.close();this._arrangeDialogFragment(this._aDialogTypes[2].type)},_arrangeDialogFragment:function(e){var t=this.getView();if(!this._pNewAppointmentDialog){this._pNewAppointmentDialog=a.load({id:t.getId(),name:"calendar.view.fragment.Create",controller:this}).then(function(e){t.addDependent(e);return e})}this._pNewAppointmentDialog.then(function(t){this._arrangeDialog(e,t)}.bind(this))},_arrangeDialog:function(e,t){var n="";t._sDialogType=e;if(e==="edit_appointment"){this._setEditAppointmentDialogContent(t);n=this._aDialogTypes[2].title}else if(e==="create_appointment_with_context"){this._setCreateWithContextAppointmentDialogContent();n=this._aDialogTypes[1].title}else if(e==="create_appointment"){this._setCreateAppointmentDialogContent();n=this._aDialogTypes[0].title}else{r.error("Wrong dialog type.")}this.updateButtonEnabledState(t);t.setTitle(n);t.open()},handleAppointmentTypeChange:function(e){var t=this.byId("isIntervalAppointment");t.setSelected(e.getSource().getSelected())},handleDialogCancelButton:function(){this.byId("createDialog").close()},_editAppointment:function(e,t,n,i){var a=this._appointmentOwnerChange(i),o=this.getView().getModel();if(t){this._convertToHeader(e,i)}else{if(this.sPath!==a){this._addNewAppointment(i.getModel().getProperty(this.sPath));this._removeAppointment(i.getModel().getProperty(this.sPath))}o.setProperty(a+"/title",e.title);o.setProperty(a+"/info",e.info);o.setProperty(a+"/type",e.type);o.setProperty(a+"/start",e.start);o.setProperty(a+"/end",e.end)}},_convertToHeader:function(e,t){var n=this.byId("selectPerson").getSelectedIndex().toString();this._removeAppointment(t.getModel().getProperty(this.sPath),n);this._addNewAppointment({start:e.start,end:e.end,title:e.title,type:e.type})},handleDialogSaveButton:function(){var e=this.byId("startDate"),t=this.byId("endDate"),n=this.byId("moreInfo").getValue(),i=this.byId("inputTitle").getValue(),a=this.byId("selectPerson").getSelectedKey(),o=this.getView().getModel(),s=this.byId("isIntervalAppointment").getSelected(),r=this.byId("createDialog"),l;if(e.getValueState()!==p.Error&&t.getValueState()!==p.Error){if(this.sPath&&r._sDialogType==="edit_appointment"){this._editAppointment({title:i,info:n,type:this.byId("detailsPopover").getBindingContext().getObject().type,start:e.getDateValue(),end:t.getDateValue()},s,a,r)}else{if(s){l={title:i,start:e.getDateValue(),end:t.getDateValue()}}else{l={title:i,info:n,start:e.getDateValue(),end:t.getDateValue(),employee_ID:a}}this._addNewAppointment(l)}o.updateBindings();r.close()}},_appointmentOwnerChange:function(e){var t=this.sPath[this.sPath.indexOf("/people/")+"/people/".length],n=this.byId("selectPerson").getSelectedIndex(),i=this.sPath,a=e.getModel().getProperty("/people/"+n.toString()+"/appointments/").length.toString();if(t!==n.toString()){i="".concat("/people/",n.toString(),"/appointments/",a.toString())}return i},_setCreateAppointmentDialogContent:function(){var e=this.byId("isIntervalAppointment"),t=this.byId("startDate"),n=this.byId("endDate"),i=this.byId("inputTitle"),a=this.byId("moreInfo"),o=this.byId("selectPerson");o.setSelectedItem(this.byId("selectPerson").getItems()[0]);t.setValue("");n.setValue("");t.setValueState(p.None);n.setValueState(p.None);i.setValue("");a.setValue("");e.setSelected(false)},_setCreateWithContextAppointmentDialogContent:function(){var e=this.getView().getModel().getProperty("/people/"),t=this.oClickEventParameters.startDate,n=this.byId("startDate"),i=this.oClickEventParameters.endDate,a=this.byId("endDate"),o=this.byId("startDate"),s=this.byId("endDate"),r=this.byId("isIntervalAppointment"),l=this.byId("inputTitle"),d=this.byId("moreInfo"),h,g;if(this.oClickEventParameters.row){h=this.oClickEventParameters.row.getTitle();g=this.byId("selectPerson");g.setSelectedIndex(e.indexOf(e.filter(function(e){return e.name===h})[0]))}n.setDateValue(t);a.setDateValue(i);l.setValue("");d.setValue("");r.setSelected(false);o.setValueState(p.None);s.setValueState(p.None);delete this.oClickEventParameters},_setEditAppointmentDialogContent:function(e){var t=e.getModel().getProperty(this.sPath),n=t.start,i=t.end,a=this.byId("startDate"),o=this.byId("endDate"),s=t.info,r=t.title,l=this.sPath[this.sPath.indexOf("/people/")+"/people/".length],d=this.byId("selectPerson"),h=this.byId("startDate"),g=this.byId("endDate"),u=this.byId("moreInfo"),c=this.byId("inputTitle"),m=this.byId("isIntervalAppointment");d.setSelectedIndex(l);h.setDateValue(n);g.setDateValue(i);u.setValue(s);c.setValue(r);a.setValueState(p.None);o.setValueState(p.None);m.setSelected(false)},_handleSingleAppointment:function(e){var t=this.getView();if(e===undefined){return}if(!e.getSelected()&&this._pDetailsPopover){this._pDetailsPopover.then(function(e){e.close()});return}if(!this._pDetailsPopover){this._pDetailsPopover=a.load({id:t.getId(),name:"calendar.view.fragment.Details",controller:this}).then(function(e){t.addDependent(e);return e})}this._pDetailsPopover.then(function(t){this._setDetailsDialogContent(e,t)}.bind(this))},_setDetailsDialogContent:function(e,t){t.setBindingContext(e.getBindingContext());t.openBy(e)},formatDate:function(e){if(e){var t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();if(t!==0||n!==0||a!==0){return i.getDateTimeInstance({style:"medium"}).format(e)}else{return i.getDateInstance({style:"medium"}).format(e)}}},_handleGroupAppointments:function(n){var i,a,o,s,r;i=n.getParameter("appointments");a=i[0].getType();s=n.getParameter("domRefId");r=i.some(function(e){return a!==e.getType()});if(r){o=i.length+" Appointments of different types selected"}else{o=i.length+" Appointments of the same "+a+" selected"}if(!this._oGroupPopover){this._oGroupPopover=new t({title:"Group Appointments",content:new e({text:o})})}else{this._oGroupPopover.getContent()[0].setText(o)}this._oGroupPopover.addStyleClass("sapUiContentPadding");this._oGroupPopover.openBy(document.getElementById(s))}})});
sap.ui.predefine("zcalendar/controller/View1.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("zcalendar.controller.View1",{onInit(){}})});
sap.ui.predefine("zcalendar/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"zcalendar/i18n/i18n.properties":'# This is the resource bundle for zcalendar\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Calendar Appointment\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Calendar Appointment\n\n#XFLD,24\nzcalendarsem-Display.flpTitle=Calendar\n',
	"zcalendar/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"zcalendar","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.19.5","toolsId":"2481aaab-ca67-4b65-8877-d9457a938a02"},"dataSources":{"mainService":{"uri":"/odata/v4/booking/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"zcalendarsem-Display":{"semanticObject":"zcalendarsem","action":"Display","title":"{{zcalendarsem-Display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.142.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"zcalendar.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"zcalendar.view","async":true,"viewPath":"zcalendar.view"},"routes":[{"name":"RouteView1","pattern":":?query:","target":["TargetView1"]}],"targets":{"TargetView1":{"id":"View1","name":"View1"}}},"rootView":{"viewName":"zcalendar.view.App","type":"XML","id":"App","async":true},"flexBundle":false}}',
	"zcalendar/view/App.view.xml":'\n<mvc:View\n\t\tcontrollerName="zcalendar.controller.App"\n\t\txmlns:mvc="sap.ui.core.mvc"\n\t\txmlns:unified="sap.ui.unified"\n\t\txmlns="sap.m"><VBox id="_IDGenVBox1" class="sapUiSmallMargin"><PlanningCalendar\n\t\t\t\tid="PC1"\n\t\t\t\tstartDate="{path: \'/startDate\'}"\n\t\t\t\trows="{path: \'/people\'}"\n\t\t\t\tappointmentsVisualization="Filled"\n\t\t\t\tappointmentSelect="handleAppointmentSelect"\n\t\t\t\tshowEmptyIntervalHeaders="false"\n\t\t\t\tintervalSelect="handleAppointmentAddWithContext"><toolbarContent><Title id="_IDGenTitle" text="Appointment Management" titleStyle="H4"/><Button id="addButton" icon="sap-icon://add" press="handleAppointmentCreate" tooltip="Add"/></toolbarContent><rows><PlanningCalendarRow id="_IDGenPlanningCalendarRow"\n\t\t\t\t\t\ticon="{pic}"\n\t\t\t\t\t\ttitle="{name}"\n\t\t\t\t\t\ttext="{role}"\n\t\t\t\t\t\tappointments="{path : \'appointments\', templateShareable: false}"\n\t\t\t\t\t\tintervalHeaders="{path: \'headers\', templateShareable: false}"><appointments><unified:CalendarAppointment id="_IDGenCalendarAppointment"\n\t\t\t\t\t\t\t\tstartDate="{start}"\n\t\t\t\t\t\t\t\tendDate="{end}"\n\t\t\t\t\t\t\t\ticon="{pic}"\n\t\t\t\t\t\t\t\ttitle="{title}"\n\t\t\t\t\t\t\t\ttext="{info}"\n\t\t\t\t\t\t\t\ttype="{type}"\n\t\t\t\t\t\t\t\ttentative="{tentative}"></unified:CalendarAppointment></appointments><intervalHeaders><unified:CalendarAppointment id="_IDGenCalendarAppointment1"\n\t\t\t\t\t\t\t\tstartDate="{start}"\n\t\t\t\t\t\t\t\tendDate="{end}"\n\t\t\t\t\t\t\t\ticon="{pic}"\n\t\t\t\t\t\t\t\ttitle="{title}"\n\t\t\t\t\t\t\t\ttype="{type}"></unified:CalendarAppointment></intervalHeaders></PlanningCalendarRow></rows></PlanningCalendar></VBox></mvc:View>',
	"zcalendar/view/View1.view.xml":'<mvc:View controllerName="zcalendar.controller.View1"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><Page id="page" title="Custom Calendar View"></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
